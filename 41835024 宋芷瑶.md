
# 支付结算

## 1. 目录
+ 用支付宝扫码的支付流程
+ 支付宝是什么机构，它使用的是什么货币
+ 云闪付扫码的支付流程
+ 数字货币与电子货币
+ 工商银行是清算银行吗

## 2.用支付宝扫码的支付流程
   
### 2. 1支付宝企业账户申请材料

1.注册前需要准备：影印件必须为彩色原件的扫描件或数码照
营业执照影印件、对公银行账户，可以是基本户或一般户、法定代表人的身份证影印件、组织机构代码证（三证合一无须）、税务登记证（三证合一无须）、开户许可证、域名证书、网站首页截图、ICP备案

2.对代理人，除以上资料，还需准备：代理人身份证影印件、企业委托书，必须盖有公司公章或者财务专用章，不能是合同/业务专用章
### 2.2 PC 收款

#### 2.2.1网银支付收款产品准入条件

1. 您申请前必须拥有企业支付宝账号（不含个体工商户），且已通过支付宝实名认证审核；注册支付宝企业账户；

2. 您必须有已建设完成的网站（非淘宝、天猫、诚信通网店、团购类网站），且已通过ICP备案，备案信息与签约商户信息一致，网站经营的商品或服务内容明确、完整；

3. 您已成功签约支付宝即时到账产品，且是非团购类商家；

4. 实物类交易网站或符合条件的虚拟类交易网站
#### 2.2.2即时到账
即时到账准入条件
![image.png](attachment:image.png)

### 2.3移动支付
签约移动支付需要提供的demo及文档要求，产品介绍文档或者手机demo，.apk .doc .docx .pdf格式，内容要求包含产品说明、接口使用场景、资费说明等，文件大小不超过5M。移动支付最多支持5个app共享一个支付账户。
#### 2.3.1 签约“移动支付”所需文档要求
产品介绍文档可做成word或pdf文档格式，任选其一。要求：图文并茂，且大小不超过5M，至少包括以下三部分的内容：

1. 产品说明：文字介绍APP的具体用途，消费群体。请详细介绍，不要太简略。

2. 资费说明：所销售产品的价格区间（可在图片上体现）。

3. 接口使用场景：要有APP中买家购买场景的页面截图（至少3-5张），以便审核人员了解页面展现方式（可在图片上体现）
### 2.4接入方式
根据支付宝接口，在申请通过审核后，获取相应的商户码和key，在支付页面展示相应的链接。用户点击该支付链接后，进入支付宝支付页面。支付完成后，进入网站支付完成页面。
#### 2.4.1接入流程
![image.png](attachment:image.png)
+ 注册企业支付宝帐号
+ 实名认证
提供公司相关证件进行实名认证，提交后，通过了会收到通知邮件。
+ 选择产品、签约
选择产品、费率后，时行签约申请，通过后会收到通知邮件。
+ 下载技术集成文档
在签约管理里可以下载技术集成文档，申请相应的apid和key



#### 2.4.2 技术集成流程
![image.png](attachment:image.png)

#### 2.4.3 获取appid
签约产品后，开发者登录开放平台-管理中心-我的应用，选择需要查看APPID的应用点击“查看”， 即可看到本应用的APPID值，如下图。
![image.png](attachment:image.png)

#### 2.4.4 生成key
> 直接运行“支付宝RAS密钥生成器SHAwithRSA1024_V1.0.bat”（WINDOWS）或“SHAwithRSA1024_V1.0.command”（MACOSX），点击“生成RSA密钥”，会自动生成公私钥，然后点击“打开文件位置”，即可找到工具自动生成的密钥
或使用OpenSSL工具命令生成
首先进入OpenSSL工具，再输入以下命令。
>>OpenSSL> genrsa -out rsa_private_key.pem 1024 #生成私钥
OpenSSL> pkcs8 -topk8 -inform PEM -in rsa_private_key.pem -outform PEM -nocrypt -out rsa_private_key_pkcs8.pem #Java开发者需要将私钥转换成PKCS8格式
OpenSSL> rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem #生成公钥
OpenSSL> exit #退出OpenSSL程序

>经过以上步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到rsa_private_key.pem（RSA私钥）、rsa_private_key_pkcs8.pem（pkcs8格式RSA私钥）和rsa_public_key.pem（对应RSA公钥）3个文件。开发者将私钥保留，将公钥提交给支付宝网关，用于验证签名。以下为私钥文件和公钥文件示例。
>>1.上传公钥&获取支付宝公钥
1.开发者登录开放平台-管理中心-我的应用，选择需要上传公钥的应用点击“查看”，点击“应用环境”：
![image.png](attachment:image.png)
2.点击“设置应用公钥”，将公钥文件去除头尾、换行和空格，仅需填入字符串。

#### 2.4.5 用支付宝提供的SDK集成
+ 获取SDK
开放平台SDK主要支持JAVA（SDK1.5、SDK1.4）、.NET、PHP 3种语言。
SDK导入以及如何使用详见服务端SDK。

+ 配置公私钥、公共请求参数
普通代码Config配置示例
配置公私钥、公共请求参数
+ 接口调用示例大致分为3步：
拼装业务参数
将参数发送给开放平台服务端
获取开放平台服务端返回值，并进行具体业务处理

#### 图示
![image.png](attachment:image.png)

![image.png](attachment:image.png)

![image.png](attachment:image.png)

## 3. 支付宝是什么机构？它使用的是什么货币？
### 机构
1.支付宝（公司全称“支付宝（中国）网络技术有限公司”）是一家非银行支付机构，在现行政策下，其不受银监会监管，而是受人民银行监管。通过人行网站的“行政审批公示”栏目可以查到目前取得《支付业务许可证》的机构名单以及业务范围。支付宝这样的非金融机构“在收付款人之间作为中介机构提供货币资金转移服务”。
2.用户放在支付宝里的钱可以理解为预充值款，而不是银行存款，两者的法律性质不同，风险也不同。
> 第三条　
  非金融机构提供支付服务，应当依据本办法规定取得《支付业务许可证》，成为支付机构。  
　 支付机构依法接受中国人民银行的监督管理。  
　 未经中国人民银行批准，任何非金融机构和个人不得从事或变相从事支付业务。

3.支付宝账户是虚帐并没有落地到个人的银行账户，但是与支付宝在银行的所有账户总额是呈映射关系的。虚拟账户上的每一笔交易都必须在虚拟账户总额上有所反应。
### 货币
支付宝使用的并非虚拟货币，数字货币，而是电子货币，是货币的电子化。 所有第三方支付平台的所有客户备付金，必须百分之百的存到央行，不允许存到别的银行。
+ 虚拟货币：
  虚拟货币是指非真实的货币。知名的虚拟货币如百度公司的百度币、腾讯公司的Q币，Q点、盛大公司的点券，新浪推出的微币（用于微游戏、新浪读书等）
+ 数字货币：
  数字货币有比特币、莱特币、无限币、夸克币、泽塔币、烧烤币、便士币（外网）、隐形金条、红币、质数币等。
+ 电子货币：
  电子货币（Electronic Money），是指用一定金额的现金或存款从发行者处兑换并获得代表相同金额的数据或者通过银行及第三方推出的快捷支付服务，通过使用某些电子化途径将银行中的余额转移，从而能够进行交易。严格意义是消费者向电子货币的发行者使用银行的网络银行服务进行储值和快捷支付，通过媒介（二维码或硬件设备），以电子形式使消费者进行交易的货币。


## 4.云闪付扫码的支付流程
   2013年, 中国银联推出了手机移动支付钱包, 即银联钱包APP。银联钱包即云闪付前身，云闪付APP于2017年12月11日正式发布，是一种非现金收付款移动交易结算工具，是在中国人民银行的指导下，由中国银联携手各商业银行、支付机构等产业各方共同开发建设、共同维护运营的移动支付APP，且逐步面向c端用户。三大核心功能：收付款、享优惠、卡管理。次功能：银联手机闪付、银联二维码支付。
   在通过你的智能手机终端申请云闪付卡(空中发卡)后,手机中便储存了这样一张虚拟卡。可以将其视作持卡人手中银行卡的替身。它借助云端存储虚拟卡片的关键信息,并进行动态更新,防止主卡信息的外泄,保障持卡人的用卡安全。
### 4.1 如何使用云闪付
1.以手机银行App入口为例,如果是在线下支付,首先打开手机银行App,绑定你的银联卡,然后确保手机开启了NFC功能,接着靠近支持具备非接触支付功能的 POS机即可完成支付。如果是在线上支付,首先要在支持“云闪付”的商户App里选择银联在线支付。其次在支付页面选择“云闪付”,再选择需要使用的云闪付卡,输入密码便可完成支付。

2.通过特定方式，在手机里生成一张虚拟的银行卡，相当于将银行发给你的银行卡的信息放在手机里，手机就相当于银行卡卡片。支付时，使用方式和上述联机方式差不多，只不过此时的”挥卡“动作挥的不是银行发给你的卡片，而是你的手机。在POS机上挥手机后，输入密码，完成支付。云闪付现有三种方式：Apple用户的Apple Pay（用iPhone，Apple watch，iPad等），三星用户的Samsung Pay，其他安卓用户的HCE方式。不同的云闪付方式通过不同的“特定方式”完成“在手机里生成一张虚拟的银行卡”这项任务。具体在银联官网上看。
### 4.2 云闪付的优点
1.云闪付在线下终端数目上占有绝对优势。以前可以接受芯片银行卡的POS机都可以使用银联闪付，而且银行卡的芯片化是国家政策，相信线下POS全部支持闪付的时代已经不远。

2.云闪付的安全系数要高于二维码支付。闪付的支付流程中使用临时的Token进行信息交换，即使被截取也无法被盗刷，二维码在支付时与服务器交换的信息是有被截取盗刷的危险的。

3.云闪付的便捷性要高于二维码支付。按照银联的描述，即便手机未解锁，只要靠近POS机，即可完成支付。而二维码需要解锁、开应用、扫码，显然步骤较多。

## 5. 电子货币与虚拟货币
### 5.1 虚拟货币
+ 虚拟币种类多样，在国外接受度比较高的虚拟货币有Facebook的F币、网络游戏Second Life的林登币等，在国内比较有代表性的虚拟货币有腾讯Q币、新浪U币、百度币、盛大元宝等。

+ 目前市场上的虚拟货币主要有四类：

  1.由游戏运营商开发，供玩家在网络游戏中作为交易媒介而使用的游戏币；

  2.由门户网站或者即时通信工具发行，供本运营网络空间内使用的专用虚拟货币；

  3.既可以在虚拟货币发行主体内使用，又可以向非发行主体购买商品和服务的交互式虚拟货币；

  4.基于密码学和现代网络P2P技术，通过复杂的数学算法产生的，特殊的电子化的、数字化的网络密码币。

+ 网络虚拟货币大致可以分为
  第一类是大家熟悉的游戏币。在单机游戏时代，主角靠打倒敌人、进赌馆赢钱等方式积累货币，用这些购买草药和装备，但只能在自己的游戏机里使用。那时，玩家之间没有“市场”。自从互联网建立起门户和社区、实现游戏联网以来，虚拟货币便有了“金融市场”，玩家之间可以交易游戏币。
  
  第二类是门户网站或者即时通讯工具服务商发行的专用货币，用于购买本网站内的服务。使用最广泛的当属腾讯公司的Q 币，可用来购买会员资格、QQ秀等增值服务。
  
  第三类互联网上的虚拟货币，如比特币（BTC）、莱特货币（LTC）等，比特币是一种由开源的P2P软体产生的电子货币，也有人将比特币意译为“比特金”，是一种网络虚拟货币。主要用于互联网金融投资，也可以作为新式货币直接用于生活中使用。 
 
### 5.2 电子货币
电子货币（Electronic Money），是指用一定金额的现金或存款从发行者处兑换并获得代表相同金额的数据或者通过银行及第三方推出的快捷支付服务，通过使用某些电子化途径将银行中的余额转移，从而能够进行交易。严格意义是消费者向电子货币的发行者使用银行的网络银行服务进行储值和快捷支付，通过媒介（二维码或硬件设备），以电子形式使消费者进行交易的货币。

1、概念：是一种表示现金的加密序列数，它可以用来表示现实中各种金额的币值。随着基于纸张的经济向数字经济的转变，电子现金将成为主流。

2、特点：匿名性、节省交易费用、节省传输费用、持有风险小、支付灵活方便、防伪造及防重复性、不可跟踪性。

3、种类：（主要有两种）一种是基于互联网环境使用的且将代表货币价值的二进制数据保管在微机终端硬盘内的电子现金；一种是将货币价值保存在IC卡内并可脱离银行支付系统流通的电子钱包。

4.定义：消费者向电子货币的发行者支付传统货币，而发行者把与传统货币的相等价值，以电子形式存储在消费者持有的电子设备中。
### 5.3 电子货币与虚拟货币的对比
电子货币是我们的钱在卡里的存在形式；虚拟货币完全就是一种商品；而至于数字货币，是一种新型的货币理念。
![image.png](attachment:image.png)

## 6.工商银行是清算银行吗？
   工行在部分地区执行人民币清算功能，即是清算银行。清算银行亦称“划拨银行”、“汇划银行”。是能直接参加票据交换所进行票据清算的银行。票据交换是指在同城范围内银行间相互代收、代付票据进行相互清算。这是一种集中办理转账清算的制度。一般由中央银行管理，通过票据交换所进行。应收大于应付款的差额增加在中央银行的存款；应收小于应付款的差额减少在中央银行的存款。票据清算的结算原则是维护收付双方的正当权益，中央银行不予垫款。其优点是便利资金清算，节省大量现金使用。国际上最早的票据交换组织为英国伦敦的票据交换所，成立于1775年。

   银行结算是指通过银行账户的资金转移所实现收付的行为，即银行接受客户委托代收代付，从付款单位存款账户划出款项，转入收款单位存款账户，以此完成经济之间债权债务的清算或资金的调拨。银行结算是商品交换的媒介，是社会经济活动中清算资金的中介。国内银行结算方式主要有银行汇票、商业汇票、银行本票、支票、汇兑、委托收款、托收承付、信用卡、信用证等。
### 6.1人民币清算银行
   香港自2003年开始设立人民币清算服务，这使人民币能够通过银行系统进行跨境交易，为人民币业务的快速发展奠定了坚实基础。现在中国全球贸易结算中，已有18%是通过人民币直接结算的，而在2010年还只有2%是通过人民币直接结算的。中国人民银行21日宣布，授权中国银行纽约分行担任美国人民币业务清算行。此次人民币清算行的设立，将进一步便利人民币在美使用和跨境交易，成为人民币国际化的重要里程碑。2019年6月27日，中国人民银行决定授权日本三菱日联银行担任日本人民币业务清算行。
![image.png](attachment:image.png)


```python

```


```python

```


```python

```
